<!--suppress ALL -->
<section id="foaie" class="container" style="width:100% !important">

  <h1>Foaie de observație clinică generală</h1>
  <br/>
  <div id="detPacient" class=" col-md-9 col-lg-9 ">
    <h3>Pacient</h3>
    <table class="table table-user-information">
      <tr>
        <td style="font-weight:bold">Nume: </td><td id="numepacient">{{foaie.detaliipacient.nume}}</td>
      </tr>
      <tr>
        <td style="font-weight:bold">Vârsta: </td><td id="varstapacient"> {{foaie.detaliipacient.varsta}}</td>
      </tr>
      <tr>
        <td style="font-weight:bold">Sex: </td><td>{{foaie.detaliipacient.sex}}</td>
      </tr>
      <tr>
        <td style="font-weight:bold">CNP: </td><td>{{foaie.detaliipacient.cnp}}</td>
      </tr>
      <tr>
        <td style="font-weight:bold">Cod: </td><td>{{foaie.detaliipacient.cod}}</td>
      </tr>
      <tr>
        <td style="font-weight:bold">Medic: </td><td>{{foaie.detaliipacient.medic}}</td>
      </tr>
      <tr>
        <td style="font-weight:bold">Secția: </td><td>{{foaie.detaliipacient.sectia}}</td>
      </tr>
    </table>
 </div>
  <br/>
  <!-- Tab links -->
  <div class="tab">
    <button class="tablinks" onclick="openTab(event, 'diagnostic')">1. Diagnostic</button>
    <button class="tablinks" onclick="openTab(event, 'anamneza')">2. Anamneza</button>
    <button class="tablinks" onclick="openTab(event, 'tratament')">3. Tratament</button>
    <button class="tablinks" onclick="openTab(event, 'epetapa')">4. Epicriza de etapă</button>
    <button class="tablinks" onclick="openTab(event, 'epfinala')">5. Epicriza finală</button>
    <button class="tablinks" onclick="openTab(event, 'recom')">6. Recomandări</button>
    <button class="tablinks" onclick="openTab(event, 'urm')">7. Urmărire</button>
  </div>

  <div id="diagnostic" class="tabcontent">
    <h3>Diagnostic</h3>
      <table width="100%">
          <tr>
              <td style="width:20%">
                  Principal
              </td>
              <td>
                  <input type="text" id="diagprincipal" style="width:100%" value="{{foaie.diagnostic.diagnosticprincipal}}"/>
              </td>
          </tr>
          <tr>
              <td>
                  La internare
              </td>
              <td>
                  <input type="text" id="diaginternare" style="width:100%" value="{{foaie.diagnostic.diagnosticlainternare}}"/>
              </td>
          </tr>
          <tr>
              <td>
                  La 24 h
              </td>
              <td>
                  <input type="text" id="diag24h" style="width:100%" value="{{foaie.diagnostic.diag24h}}"/>
              </td>
          </tr>
          <tr>
              <td>
                  La 72 h
              </td>
              <td>
                  <input type="text" id="diag72h" style="width:100%" value="{{foaie.diagnostic.diag72h}}"/>
              </td>
          </tr>
          <tr>
              <td>
                  Intoxicații asociate
              </td>
              <td>
                  <input type="text" id="intoxicatii" style="width:100%" value="{{foaie.diagnostic.intoxicatii}}"/>
              </td>
          </tr>
          <tr>
              <td>
                  Alergii
              </td>
              <td>
                  <input type="text" id="alergii" style="width:100%" value="{{foaie.diagnostic.alergii}}"/>
              </td>
          </tr>
          <tr>
              <td>
                  Grupa de sânge
              </td>
              <td>
                  <select id="sange">
                      <option value="o">0</option>
                      <option value="a">A</option>
                      <option value="b">B</option>
                      <option value="ab">AB</option>
                      <option value="n/a">N/A</option>
                  </select>
                  &nbsp;&nbsp;
                  Rh
                  <select id="rh">
                      <option value="pozitiv">Pozitiv</option>
                      <option value="negativ">Negativ</option>
                      <option value="n/a">N/A</option>
                  </select>
              </td>
          </tr>
          <tr>
              <td>
                  Este însoțit de:
              </td>
              <td>
                  <input type="text" id="insotit" style="width:100%" value="{{foaie.diagnostic.insotit}}"/>
              </td>
          </tr>
      </table>

    <h3>Arsuri - etiologia</h3>
    <div>
        <table width="70%"><tr><td style="width:30%">Vechimea arsurilor: </td><td> <input type="text" id="vechimearsuri" style="width:10%" value="{{foaie.vechimearsuri}}"/> (ore)</td></tr></table>
        <div id="updatedtable"></div>
        <input type="button" id="adauga" onclick="adauga()" value="Adaugă arsură"/>&nbsp;&nbsp;<input type="button" id="sterge" onclick="sterge()" value="Șterge ultima arsură"/>
        <br/><br/>
        <input type="checkbox" id="caiResp" name="caiResp" value="{{foaie.caiResp}}">Arsuri de căi respiratorii superioare</input>


    </div><br/>
      <table width="100%">
      <tr>
          <td style="width:20%">
              Diagnostic la externare
          </td>
          <td colspan="3">
              <input type="text" id="diagexternare" style="width:100%" value="{{foaie.diagnostic.diagnosticexternare}}"/>
          </td>
      </tr>
          <tr>
              <td style="width:20%">
                  Data și ora decesului
              </td>
              <td>
                  <input type="text" id="datadeces" style="width:100%" value="{{foaie.diagnostic.datadeces}}"/>
              </td>
          </tr>
          <tr>
              <td style="width:20%">
                  Diagnostic în caz de deces:
              </td>
              <td></td>

          </tr>
          <tr>
              <td>a) Cauza directă (imediată)</td><td>
              <input type="text" id="cauzadirectadeces" style="width:100%" value="{{foaie.diagnostic.cauzadirectadeces}}"/>
          </td>
          </tr>
          <tr>
              <td>b) Cauza antecedentă</td><td>
              <input type="text" id="cauzaantecedentadeces" style="width:100%" value="{{foaie.diagnostic.cauzaantecedentadeces}}"/>
          </td>
          </tr>
          <tr>
              <td>Stări morbide inițiale:</td><td>
              <input type="text" id="starimorbideinitiale" style="width:100%" value="{{foaie.diagnostic.starimorbideinitiale}}"/>
          </td>
          </tr>
          <tr>
              <td>Alte stări morbide importante</td><td>
              <input type="text" id="starimorbideimportante" style="width:100%" value="{{foaie.diagnostic.starimorbideimportante}}"/>
          </td>
          </tr>
      </table>
  </div>

  <div id="anamneza" class="tabcontent">
    <h3>Anamneza</h3>

    Locul producerii accidentului: <input type="text" id="locaccident" value="{{foaie.anamneza.loc}}"/><br/><br/>
    <input type="checkbox" id="prezentaparinti" name="prezentaparinti" value="{{foaie.anamneza.prezentaparinti}}">A fost în prezența părinților</input><br/><br/>
    Descrierea accidentului: <input style="width:100%" type="text" id="prezentaparinti" name="prezentaparinti" value="{{foaie.anamneza.descriere}}"/><br/><br/>

    Primul ajutor<br/>
      Locul <input type="text" style="width:100%"  id="locajutor" name="locajutor" value="{{foaie.anamneza.locprimajutor}}"/><br/><br/>
      Tratamentul <input type="text"  style="width:100%" id="tratamentajutor" name="tratamentajutor" value="{{foaie.anamneza.tratamentprimajutor}}"/><br/>
   <br/>
      Alte unități intermediare<br/>
      <input type="text"  style="width:100%" id="unitatiintermediare" name="unitatiintermediare" value="{{foaie.anamneza.unitatiintermediare}}"/>
      <br/><br/>
      Tratament primit anterior<br/>
      <input type="text"  style="width:100%" id="tratamentanterior" name="tratamentanterior" value="{{foaie.anamneza.tratamentanterior}}"/>
      <br/><br/>
    Mijloc de transport la spital <input type="text" id="transport" style="width:100%"  name="transport" value="{{foaie.anamneza.transport}}"/><br/><br/>
    Tratamentul primit în timpul transportului: <input type="text" id="tratasport" style="width:100%"  name="tratasport" value="{{foaie.anamneza.tratasport}}"/><br/><br/>
      Starea pacientului în momentul sosirii la spital/UPU: <input type="text" style="width:100%"  id="starepacient" name="starepacient" value="{{foaie.anamneza.stare}}"/><br/><br/>
      Timpul trecut de la producerea accidentului: <input type="text" style="width:100%"  id="timp" name="timp" value="{{foaie.anamneza.timp}}"/><br/><br/>
  </div>

  <div id="tratament" class="tabcontent">
    <h3>Tratament</h3>
    <h4>a) Sistemic</h4>

      {{#each foaie.fiseterapie}}
      <a href="/fisa_terapie?pacient={{foaie.detaliipacient.nume}}&amp;data={{this.data}}" style="color:red" target="_blank">{{this.data}}</a>&nbsp;&nbsp;<input style="font-size:10px;height:17px" type="button" id="adaugafisaterapie" onclick="adaugaFisaTerapie()" value="Adaugă fișă terapie"/> <br/>
      {{/each}}<br/>
      <table><tr><td>Cantitatea de lichide pe 24 de ore </td><td><input type="text" id="cantitatelichide" style="width:100%"  name="cantitatelichide" value="{{foaie.anamneza.cantitatelichide}}"/></td></tr>
          <tr><td></td><td>Formule pentru 0-6 ani: Galveston</td></tr>
          <tr><td></td><td> Formule pentru 7-18 ani: Parkland</td></tr>
          <tr><td>Cantitate pentru primele</td><td></td></tr>
          <tr><td style="text-align:right">8 h</td><td><input type="text" id="cantlichide8h" style="width:100%"  name="cantlichide8h" value="{{foaie.anamneza.cantlichide8h}}"/></td></tr>
          <tr><td style="text-align:right">16 h</td><td><input type="text" id="cantlichide16h" style="width:100%"  name="cantlichide16h" value="{{foaie.anamneza.cantlichide16h}}"/></td></tr>
          <tr><td style="text-align:right">24 h</td><td><input type="text" id="cantlichide24h" style="width:100%"  name="cantlichide24h" value="{{foaie.anamneza.cantlichide24h}}"/></td></tr>
      </table>
      <br/><br/>
    <h4>b) Local</h4>
    <h4>Dinamica plăgilor</h4>
      <input type="text" id="dinamicaplagi" style="width:100%"  name="dinamicaplagi" value="{{foaie.anamneza.dinamicaplagi}}"/><br/><br/>
      <div><input title="Choose a video please" type="file" id="adaugafoto0" onchange="pressed(0)" /><span style="font-size:10px" id="fileLabel0">Adaugă fotografie</span></div>
      <h4>Evoluție și tratament</h4>
      <div id="updatedtableEvolutie"></div>
      <input type="button" id="adaugareevolutie" onclick="adaugareevolutie()" value="Adaugă evoluție"/>&nbsp;&nbsp;<input type="button" id="stergeEvolutie" onclick="stergereevolutie()" value="Șterge ultima evoluție"/>

      <h4>Analize</h4>
    {{#each foaie.buletinebio}}
    <a href="/buletin_analize_biochimie?pacient={{foaie.detaliipacient.nume}}&amp;data={{this.data}}" style="color:red" target="_blank">Biochimie {{this.data}}</a>&nbsp;&nbsp;<input style="font-size:10px;height:17px" type="button" id="adaugaanBio" onclick="adaugaanBio()" value="Adaugă analiză biochimie"/> <br/>
    {{/each}}
    {{#each foaie.buletinecoagulare}}
    <a href="/buletin_analize_coagulare?pacient={{foaie.detaliipacient.nume}}&amp;data={{this.data}}" style="color:red" target="_blank">Coagulare {{this.data}}</a>&nbsp;&nbsp;<input style="font-size:10px;height:17px" type="button" id="adaugaanCo" onclick="adaugaanCo()" value="Adaugă analiză coagulare"/> <br/>
    {{/each}}
    {{#each foaie.buletinehemo}}
    <a href="/buletin_analize_hemato?pacient={{foaie.detaliipacient.nume}}&amp;data={{this.data}}" style="color:red"  target="_blank">Sânge {{this.data}}</a>&nbsp;&nbsp;<input style="font-size:10px;height:17px" type="button" id="adaugaanHema" onclick="adaugaanHema()" value="Adaugă analiză hematologie"/> <br/>
    {{/each}}
    <h4></h4>
      <h4><a style="color:black" target="_blank" href="/foaie_temperatura?pacient={{foaie.detaliipacient.nume}}">Foaie temperatura</a></h4>
  </div>
  <div id="epetapa" class="tabcontent">
    <h3>Epicriza de etapă</h3>
      {{#each foaie.epicrizedeetapa}}
      <a href="/epicriza_etapa?pacient={{foaie.detaliipacient.nume}}&amp;data={{this.dataV}}" style="color:red" target="_blank">{{this.dataV}}</a>&nbsp;&nbsp;
      <br/>
      {{/each}}<br/>
      <input type="button" id="adaugaepicriza" onclick="adaugaEpicriza()" value="Adaugă epicriză"/>
  </div>
  <div id="epfinala" class="tabcontent">
    <h3>Epicriza finală</h3>
    <textarea id="epicrizafinala" name="epicrizafinala" rows="4" cols="50">
      {{foaie.epicrizafinala}}
    </textarea>
  </div>
  <div id="recom" class="tabcontent">
    <h3>Recomandări</h3>
      Medicație <input type="text" id="medicatie" style="width:100%"  name="medicatie" value="{{foaie.medicatie}}"/>
      Kinetoterapie <input type="text" id="kineto" style="width:100%"  name="kineto" value="{{foaie.kineto}}"/>
      Alte comentarii
      <input type="text" id="recomments" style="width:100%"  name="recomments" value="{{foaie.comments}}"/>
      </div>
  <div id="urm" class="tabcontent">
    <h3>Urmărire</h3>
    <p>Cura cicatricilor</p>
    <textarea id="cura" name="cura" rows="4" cols="50">
      {{foaie.cura}}
    </textarea>
      <br/> <br/>
      <table width="100%">
          <tr><td style="font-weight:bold;width:5%">Luna</td><td style="font-weight:bold; width:28%">Descriere</td><td style="font-weight:bold; width:28%">Analize laborator</td><td style="font-weight:bold;">Rx</td><td style="font-weight:bold; width:4%">Spital</td><td style="font-weight:bold; width:4%">Online</td></tr>
          <tr><td>1</td><td><input type="text" id="descriere1"  style="width:98%" name="descriere1" value="{{foaie.descriere1}}"/></td><td><input type="text" id="analize1"  style="width:98%" name="analize1" value="{{foaie.analize1}}"/></td><td><div><input title="Choose a video please" type="file" id="adaugafoto1" onchange="pressed(1)" /><span style="font-size:10px" id="fileLabel1">Adaugă foto</span></div></td><td><input type="checkbox" id="spital1" name="spital1" value="{{foaie.spital1}}" onchange="checkboxPressed(1,1)"/></td><td><input type="checkbox" id="online1" name="online1" value="{{foaie.online1}}" onchange="checkboxPressed(2,1)" /></td></tr>
          <tr><td>2</td><td><input type="text" id="descriere2"  style="width:98%" name="descriere2" value="{{foaie.descriere2}}"/></td><td><input type="text" id="analize2"  style="width:98%" name="analize2" value="{{foaie.analize2}}"/></td><td><div><input title="Choose a video please" type="file" id="adaugafoto2" onchange="pressed(2)"/><span style="font-size:10px" id="fileLabel2">Adaugă foto</span></div></td><td><input type="checkbox" id="spital2" name="spital2" value="{{foaie.spital2}}" onchange="checkboxPressed(1,2)"/></td><td><input type="checkbox" id="online2" name="online2" value="{{foaie.online2}}" onchange="checkboxPressed(2,2)"/></td></tr>
          <tr><td>3</td><td><input type="text" id="descriere3"  style="width:98%" name="descriere3" value="{{foaie.descriere3}}"/></td><td><input type="text" id="analize3"  style="width:98%" name="analize3" value="{{foaie.analize3}}"/></td><td><input type="file" title="Choose a video please" id="adaugafoto3" onchange="pressed(3)"/><span id="fileLabel3" style="font-size:10px">Adaugă foto</span></td><td><input type="checkbox" id="spital3" name="spital3" value="{{foaie.spital3}}" onchange="checkboxPressed(1,3)"/></td><td><input type="checkbox" id="online3" name="online3" value="{{foaie.online3}}" onchange="checkboxPressed(2,3)"/></td></tr>
          <tr><td>4</td><td><input type="text" id="descriere4"  style="width:98%" name="descriere4" value="{{foaie.descriere4}}"/></td><td><input type="text" id="analize4"  style="width:98%" name="analize4" value="{{foaie.analize4}}"/></td><td><input type="file" title="Choose a video please" id="adaugafoto4" onchange="pressed(4)"/><span id="fileLabel4" style="font-size:10px">Adaugă foto</span></td><td><input type="checkbox" id="spital4" name="spital4" value="{{foaie.spital4}}" onchange="checkboxPressed(1,4)"/></td><td><input type="checkbox" id="online4" name="online4" value="{{foaie.online4}}" onchange="checkboxPressed(2,4)"/></td></tr>
          <tr><td>5</td><td><input type="text" id="descriere5" style="width:98%"  name="descriere5" value="{{foaie.descriere5}}"/></td><td><input type="text" id="analize5"  style="width:98%" name="analize5" value="{{foaie.analize5}}"/></td><td><input type="file" title="Choose a video please" id="adaugafoto5" onchange="pressed(5)"/><span id="fileLabel5" style="font-size:10px">Adaugă foto</span></td><td><input type="checkbox" id="spital5" name="spital5" value="{{foaie.spital5}}" onchange="checkboxPressed(1,5)"/></td><td><input type="checkbox" id="online5" name="online5" value="{{foaie.online5}}" onchange="checkboxPressed(2,5)"/></td></tr>
          <tr><td>6-9</td><td><input type="text" id="descriere69"  style="width:98%" name="descriere69" value="{{foaie.descriere69}}"/></td><td><input type="text" id="analize69"  style="width:98%" name="analize69" value="{{foaie.analize69}}"/></td><td><input type="file" title="Choose a video please"  id="adaugafoto69" onchange="pressed(69)"/><span id="fileLabel69" style="font-size:10px">Adaugă foto</span></td><td><input type="checkbox" id="spital69" name="spital69" value="{{foaie.spital69}}" onchange="checkboxPressed(1,69)"/></td><td><input type="checkbox" id="online69" name="online69" value="{{foaie.online69}}" onchange="checkboxPressed(2,69)"/></td></tr>
          <tr><td>9-12</td><td><input type="text" id="descriere912"  style="width:98%" name="descriere912" value="{{foaie.descriere912}}"/></td><td><input type="text" id="analize912"  style="width:98%" name="analize912" value="{{foaie.analize912}}"/></td><td><input type="file" title="Choose a video please" id="adaugafoto912" onchange="pressed(912)"/><span id="fileLabel912" style="font-size:10px">Adaugă foto</span></td><td><input type="checkbox" id="spital912" name="spital912" value="{{foaie.spital912}}" onchange="checkboxPressed(1,912)"/></td><td><input type="checkbox" id="online912" name="online912" value="{{foaie.online912}}" onchange="checkboxPressed(2,912)"/></td></tr>
          <tr><td>12-18</td><td><input type="text" id="descriere1218" style="width:98%"  name="descriere1218" value="{{foaie.descriere1218}}"/></td><td><input type="text" id="analize1218"  style="width:98%" name="analize1218" value="{{foaie.analize1218}}"/></td><td><input type="file" title="Choose a video please" id="adaugafoto1218" onchange="pressed(1218)"/><span id="fileLabel1218" style="font-size:10px">Adaugă foto</span></td><td><input type="checkbox" id="spital1218" name="spital1218" value="{{foaie.spital1218}}" onchange="checkboxPressed(1,1218)"/></td><td><input type="checkbox" id="online1218" name="online1218" value="{{foaie.online1218}}" onchange="checkboxPressed(2,1218)"/></td></tr>
          <tr><td>18-24</td><td><input type="text" id="descriere1824"  style="width:98%" name="descriere1824" value="{{foaie.descriere1824}}"/></td><td><input type="text" id="analize1824"  style="width:98%" name="analize1824" value="{{foaie.analize1824}}"/></td><td><input type="file" title="Choose a video please" id="adaugafoto1824" onchange="pressed(1824)"/><span id="fileLabel1824" style="font-size:10px">Adaugă foto</span></td><td><input type="checkbox" id="spital1824" name="spital1824" value="{{foaie.spital1824}}" onchange="checkboxPressed(1,1824)"/></td><td><input type="checkbox" id="online1824" name="online1824" value="{{foaie.online1824}}" onchange="checkboxPressed(2,1824)"/></td></tr>
          <tr><td>24-30</td><td><input type="text" id="descriere2430"  style="width:98%" name="descriere2430" value="{{foaie.descriere2430}}"/></td><td><input type="text" id="analize2430"  style="width:98%" name="analize2430" value="{{foaie.analize2430}}"/></td><td><input type="file" title="Choose a video please" id="adaugafoto2430" onchange="pressed(2430)"/><span id="fileLabel2430" style="font-size:10px">Adaugă foto</span></td><td><input type="checkbox" id="spital2430" name="spital2430" value="{{foaie.spital2430}}" onchange="checkboxPressed(1,2430)"/></td><td><input type="checkbox" id="online2430" name="online2430" value="{{foaie.online2430}}" onchange="checkboxPressed(2,2430)"/></td></tr>
          <tr><td>30-36</td><td><input type="text" id="descriere3036" style="width:98%"  name="descriere3036" value="{{foaie.descriere3036}}"/></td><td><input type="text" id="analize3036"  style="width:98%" name="analize3036" value="{{foaie.analize3036}}"/></td><td><input type="file" title="Choose a video please" id="adaugafoto3036" onchange="pressed(3036)"/><span id="fileLabel3036" style="font-size:10px">Adaugă foto</span></td><td><input type="checkbox" id="spital3036" name="spital3036" value="{{foaie.spital3036}}" onchange="checkboxPressed(1,3036)"/></td><td><input type="checkbox" id="online3036" name="online3036" value="{{foaie.online3036}}" onchange="checkboxPressed(2,3036)"/></td></tr>
      </table>
  </div>
    <br/>

    <button onclick="save()" id="salveaza" style="font-size:16px;height:25px">Salvare foaie</button>

  <script type="text/x-handlebars-template" id="tableTemplate">
    __#each arsVV++
    Gradul:
    <select id="gradSelect__this.position++" name="gradSelect__this.position++" style="width:100px" >
      <option value="__this.grad++" hidden="hidden" selected="selected">__this.grad++</option>
      <option value="1">1</option>
      <option value="2A">2A</option>
      <option value="2B">2B</option>
      <option value="3">3</option>
      <option value="4">4</option>

    </select>&nbsp;&nbsp;
    Localizare
    <input type="text" id="localizare__this.position++" value="__this.localizare++"/>&nbsp;&nbsp;
    Procent segment <input type="text" id="procent__this.position++" value="__this.procent++"/>&nbsp;%<br/><br/>

    __/each++

  </script>
  <script type="text/x-handlebars-template" id="tableTemplateRecomm">
        __#each recomm++
        __this.position++. <input type="text" style="width:90%" id="recomm__this.position++" value="__this.value++"/> <br/><br/>
        __/each++

  </script>
  <script type="text/x-handlebars-template" id="tableTemplateEvolutie">
        <table width="100%">
            __#each evolutii++
            <tr>
                <td style="width:10%;font-weight:bold">Data</td><td> <input type="text" style="width:90%" id="evoldata__this.position++" value="__this.dataEvolutiei++"/></td></tr>
            <tr><td>Evoluție</td><td><input type="text" style="width:90%" id="evol__this.position++" value="__this.evolutie++"/></td></tr>
            <tr><td>Tratament</td><td><input type="text" style="width:90%" id="trat__this.position++" value="__this.tratament++"/></td></tr>
            <tr><td>&nbsp;</td></tr>
        __/each++
        </table>
  </script>
  <script src="/js/jquery-3.6.0.min.js"></script>
  <script src="/js/handlebars.min.js"></script>
  <script src="/js/bootstrap-filestyle.min.js"></script>
  <script src="/js/utils.js"></script>
  <script src="/js/general.js"></script>

  <script>
    function checkboxPressed(position, checkboxIndex) {
        var spital=document.getElementById("spital"+checkboxIndex).checked;
        var online=document.getElementById("online"+checkboxIndex).checked;
        if (position==1 && spital==online && spital=='1'){
            document.getElementById("online"+checkboxIndex).checked = 0 ;
        }
        else if (position==2 && spital==online && online=='1'){
            document.getElementById("spital"+checkboxIndex).checked = 0 ;
        }

    }
  function save() {
    // Run the test and do something with the results...
    fetch("/foaie_observatie",{
  method: "POST"}).then (res => {
    alert("Salvat!");
    location.reload();
});
  }
  window.pressed = function(imageIndex){
    var a = document.getElementById('adaugafoto' + imageIndex);
    if(a.value == "")
    {
        document.getElementById("fileLabel"+imageIndex).innerHTML = "Adaugă foto";
    }
    else
    {
        var theSplit = a.value.split('\\');
        document.getElementById("fileLabel"+imageIndex).innerHTML = theSplit[theSplit.length-1];
    }
};


  function adaugaEpicriza(){
    window.open("/epicriza_etapa?pacient={{foaie.detaliipacient.nume}}", '_blank').focus();
  }
  function adaugaFisaTerapie(){
    window.open("/fisa_terapie?pacient={{foaie.detaliipacient.nume}}", '_blank').focus();
  }
  function adaugaanBio() {
     window.open("/buletin_analize_biochimie?pacient={{foaie.detaliipacient.nume}}", '_blank').focus();
  }
  function adaugaanCo(){
      window.open("/buletin_analize_coagulare?pacient={{foaie.detaliipacient.nume}}", '_blank').focus();
  }
  function adaugaanHema(){
       window.open("/buletin_analize_hemato?pacient={{foaie.detaliipacient.nume}}", '_blank').focus();
  }
  window.document.title= "Foaie de observație - " + "{{foaie.detaliipacient.nume}}";
  var templateText = $("#tableTemplate").html();

  templateText = $("#tableTemplate").html().replaceAll("_","{").replaceAll("+","}");
  var tableTemplate = Handlebars.compile(templateText);
  var arsuri = JSON.parse('{{{arsuriJsonVar}}}');

  var evolutiiList = JSON.parse('{{{evolutiiJsonList}}}');
  $("#updatedtable").html(tableTemplate({arsVV: arsuri }));

  var templateTextRecomm = $("#tableTemplateRecomm").html();

  templateTextRecomm = $("#tableTemplateRecomm").html().replaceAll("_","{").replaceAll("+","}");

  var tableTemplateRecomm = Handlebars.compile(templateTextRecomm);

    var templateTextEvolutie = $("#tableTemplateEvolutie").html();

    templateTextEvolutie = $("#tableTemplateEvolutie").html().replaceAll("_","{").replaceAll("+","}");

    var tableTemplateEvolutie = Handlebars.compile(templateTextEvolutie);

    $("#updatedtableEvolutie").html(tableTemplateEvolutie({evolutii: evolutiiList }));
    function openTab(evt, tabName) {
  // Declare all variables
  var i, tabcontent, tablinks;

  // Get all elements with class="tabcontent" and hide them
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }

  // Get all elements with class="tablinks" and remove the class "active"
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }

  // Show the current tab, and add an "active" class to the button that opened the tab
  document.getElementById(tabName).style.display = "block";
  evt.currentTarget.className += " active";
}
function adaugareevolutie() {
    var templateText = $("#tableTemplateEvolutie").html();

    templateText = $("#tableTemplateEvolutie").html().replaceAll("_","{").replaceAll("+","}");

    var tableTemplate = Handlebars.compile(templateText);
    var lengthEvolutii = evolutiiList.length;


     var newEvolutiiList = [];
    for (var index = 0; index < lengthEvolutii; index++) {
       var newEvolutie = {};
       newEvolutie.position = index;
       newEvolutie.dataEvolutiei = document.getElementById("evoldata"+index).value;

       newEvolutie.evolutie = document.getElementById("evol"+index).value;
       newEvolutie.tratament = document.getElementById("trat"+index).value;
       newEvolutiiList.push(newEvolutie);
    }
    evolutiiList = [];
    for (var i = 0; i < newEvolutiiList.length;i++){
        evolutiiList.push(newEvolutiiList[i]);
    }

    evolutiiList.push({position: evolutiiList.length,value:""});

    $("#updatedtableEvolutie").html(tableTemplate({evolutii: evolutiiList }));
}
function stergereevolutie(){
  var templateText = $("#tableTemplateEvolutie").html();

    templateText = $("#tableTemplateEvolutie").html().replaceAll("_","{").replaceAll("+","}");

    var tableTemplate = Handlebars.compile(templateText);
    evolutiiList.pop();

    $("#updatedtableEvolutie").html(tableTemplate({evolutii: evolutiiList }));
}

function adauga(){
    var templateText = $("#tableTemplate").html();

    templateText = $("#tableTemplate").html().replaceAll("_","{").replaceAll("+","}");

    var tableTemplate = Handlebars.compile(templateText);
    var lengthArsuri = arsuri.length;
    arsuri = [];

    for (var index = 0; index < lengthArsuri; index++) {
        var newArsura = {};
        newArsura.position = index;
        newArsura.grad =document.getElementById("gradSelect"+index).value;
        newArsura.localizare =document.getElementById("localizare"+index).value;
        newArsura.procent=document.getElementById("procent"+index).value;
        arsuri.push(newArsura);
    }
     var newArsura = {};
    newArsura.position = arsuri.length;
    newArsura.grad =null;
    newArsura.localizare =null;
    newArsura.procent=null;
    arsuri.push(newArsura);

    $("#updatedtable").html(tableTemplate({arsVV: arsuri }));
 }
 function sterge(){
   var templateText = $("#tableTemplate").html();

    templateText = $("#tableTemplate").html().replaceAll("_","{").replaceAll("+","}");

    var tableTemplate = Handlebars.compile(templateText);
    arsuri.pop();

    $("#updatedtable").html(tableTemplate({arsVV: arsuri }));
 }
</script>

</section>